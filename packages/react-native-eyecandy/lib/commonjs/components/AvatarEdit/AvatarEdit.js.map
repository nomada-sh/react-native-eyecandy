{"version":3,"sources":["AvatarEdit.tsx"],"names":["AvatarEdit","style","size","source","onPress","onChange","props","colors","c","background","default","onImageSelected","res","errorCode","JSON","stringify","didCancel","assets","onActionSheetSelect","index","options","mediaType","launch","launchImageLibrary","launchCamera","then","catch","console","error","handlePress","e","optionsIOS","optionsAndroid","cancelButtonIndex","onCancelAndroidIndex","title","width","height","borderRadius","borderWidth","borderColor","content","styles","cameraIconButton","Camera","StyleSheet","create","position","bottom","right"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useCallback } from 'react';\nimport {\n  GestureResponderEvent,\n  Pressable,\n  PressableProps,\n  StyleProp,\n  StyleSheet,\n  ViewStyle,\n} from 'react-native';\n\nimport {\n  ImageLibraryOptions,\n  ImagePickerResponse,\n  launchCamera,\n  launchImageLibrary,\n} from 'react-native-image-picker';\n\nimport Avatar, { AvatarProps } from '../Avatar';\nimport IconButton from '../IconButton';\nimport { Camera } from '@nomada-sh/react-native-eyecandy-icons';\nimport { useColors } from '@nomada-sh/react-native-eyecandy-theme';\nimport { ActionSheet } from '../../utils';\n\nimport { ms } from '../../utils';\n\nexport interface AvatarEditProps extends Omit<PressableProps, 'style'> {\n  size?: number;\n  source: AvatarProps['source'];\n  style?: StyleProp<ViewStyle>;\n  onChange?: (assets: ImagePickerResponse['assets']) => void;\n}\n\nfunction AvatarEdit({\n  style,\n  size = ms(100),\n  source,\n  onPress,\n  onChange,\n  ...props\n}: AvatarEditProps) {\n  const colors = useColors(c => c.background.default);\n\n  const onImageSelected = useCallback(\n    (res: ImagePickerResponse) => {\n      if (res.errorCode) throw JSON.stringify(res);\n\n      if (res.didCancel) return;\n\n      onChange?.(res.assets);\n    },\n    [onChange],\n  );\n\n  const onActionSheetSelect = useCallback(\n    index => {\n      if (index === 2) return;\n\n      const options: ImageLibraryOptions = {\n        mediaType: 'photo',\n      };\n\n      const launch = index === 0 ? launchImageLibrary : launchCamera;\n\n      launch(options).then(onImageSelected).catch(console.error);\n    },\n    [onImageSelected],\n  );\n\n  const handlePress = useCallback(\n    (e: GestureResponderEvent) => {\n      ActionSheet(\n        {\n          optionsIOS: ['From Gallery', 'From Camera', 'Cancel'],\n          optionsAndroid: ['From Gallery', 'From Camera'],\n          cancelButtonIndex: 2,\n          onCancelAndroidIndex: 2,\n          title: 'Update Profile Picture',\n        },\n        onActionSheetSelect,\n      );\n\n      onPress?.(e);\n    },\n    [onActionSheetSelect, onPress],\n  );\n\n  return (\n    <Pressable\n      onPress={handlePress}\n      style={[\n        {\n          width: size,\n          height: size,\n          borderRadius: size / 2,\n        },\n        style,\n      ]}\n      {...props}\n    >\n      <Avatar size={size} source={source} />\n      <IconButton\n        style={[\n          {\n            borderWidth: 1.5,\n            borderColor: colors.content,\n          },\n          styles.cameraIconButton,\n        ]}\n        icon={Camera}\n        iconSize={14}\n        size={24}\n        color=\"primary\"\n        onPress={handlePress}\n      />\n    </Pressable>\n  );\n}\n\nconst styles = StyleSheet.create({\n  cameraIconButton: {\n    position: 'absolute',\n    bottom: 2,\n    right: 2,\n  },\n});\n\nexport default AvatarEdit;\n"]}